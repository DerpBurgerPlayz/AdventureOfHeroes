define("vendors/msgpack",[],function(){function t(e){if(e===undefined)return"undefined";var t,n;e instanceof ArrayBuffer?(n="ArrayBuffer",t=new DataView(e)):e instanceof DataView&&(n="DataView",t=e);if(!t)return JSON.stringify(e);var r=[];for(var i=0;i<e.byteLength;i++){if(i>20){r.push("...");break}var s=t.getUint8(i).toString(16);s.length===1&&(s="0"+s),r.push(s)}return"<"+n+" "+r.join(" ")+">"}function n(e,t,n){var r=e.byteLength;for(var i=0,s=n.length;i<s;i++){var o=n.charCodeAt(i);if(o<128){e.setUint8(t++,o>>>0&127|0);continue}if(o<2048){e.setUint8(t++,o>>>6&31|192),e.setUint8(t++,o>>>0&63|128);continue}if(o<65536){e.setUint8(t++,o>>>12&15|224),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);continue}if(o<1114112){e.setUint8(t++,o>>>18&7|240),e.setUint8(t++,o>>>12&63|128),e.setUint8(t++,o>>>6&63|128),e.setUint8(t++,o>>>0&63|128);continue}throw new Error("bad codepoint "+o)}}function r(e,t,n){var r="";for(var i=t,s=t+n;i<s;i++){var o=e.getUint8(i);if((o&128)===0){r+=String.fromCharCode(o);continue}if((o&224)===192){r+=String.fromCharCode((o&15)<<6|e.getUint8(++i)&63);continue}if((o&240)===224){r+=String.fromCharCode((o&15)<<12|(e.getUint8(++i)&63)<<6|(e.getUint8(++i)&63)<<0);continue}if((o&248)===240){r+=String.fromCharCode((o&7)<<18|(e.getUint8(++i)&63)<<12|(e.getUint8(++i)&63)<<6|(e.getUint8(++i)&63)<<0);continue}throw new Error("Invalid byte "+o.toString(16))}return r}function i(e){var t=0;for(var n=0,r=e.length;n<r;n++){var i=e.charCodeAt(n);if(i<128){t+=1;continue}if(i<2048){t+=2;continue}if(i<65536){t+=3;continue}if(i<1114112){t+=4;continue}throw new Error("bad codepoint "+i)}return t}function s(e,t){this.offset=t||0,this.view=e}function o(e){var t=new DataView(e),n=new s(t),r=n.parse();if(n.offset!==e.byteLength)throw new Error(e.byteLength-n.offset+" trailing bytes");return r}function u(e,t,r){var s=typeof e;if(s==="string"){var o=i(e);if(o<32)return t.setUint8(r,o|160),n(t,r+1,e),1+o;if(o<65536)return t.setUint8(r,218),t.setUint16(r+1,o),n(t,r+3,e),3+o;if(o<4294967296)return t.setUint8(r,219),t.setUint32(r+1,o),n(t,r+5,e),5+o}if(e instanceof ArrayBuffer){var o=e.byteLength;if(o<65536)return t.setUint8(r,216),t.setUint16(r+1,o),(new Uint8Array(t.buffer)).set(new Uint8Array(e),r+3),3+o;if(o<4294967296)return t.setUint8(r,217),t.setUint32(r+1,o),(new Uint8Array(t.buffer)).set(new Uint8Array(e),r+5),5+o}if(s==="number"){if(e<<0!==e)return t.setUint8(r,203),t.setFloat64(r+1,e),9;if(e>=0){if(e<128)return t.setUint8(r,e),1;if(e<256)return t.setUint8(r,204),t.setUint8(r+1,e),2;if(e<65536)return t.setUint8(r,205),t.setUint16(r+1,e),3;if(e<4294967296)return t.setUint8(r,206),t.setUint32(r+1,e),5;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return t.setInt8(r,e),1;if(e>=-128)return t.setUint8(r,208),t.setInt8(r+1,e),2;if(e>=-32768)return t.setUint8(r,209),t.setInt16(r+1,e),3;if(e>=-2147483648)return t.setUint8(r,210),t.setInt32(r+1,e),5;throw new Error("Number too small -0x"+(-e).toString(16).substr(1))}if(s==="undefined")return t.setUint8(r,196),1;if(e===null)return t.setUint8(r,192),1;if(s==="boolean")return t.setUint8(r,e?195:194),1;if(s==="object"){var o,a=0,f=Array.isArray(e);if(f)o=e.length;else{var l=Object.keys(e);o=l.length}var a;o<16?(t.setUint8(r,o|(f?144:128)),a=1):o<65536?(t.setUint8(r,f?220:222),t.setUint16(r+1,o),a=3):o<4294967296&&(t.setUint8(r,f?221:223),t.setUint32(r+1,o),a=5);if(f)for(var c=0;c<o;c++)a+=u(e[c],t,r+a);else for(var c=0;c<o;c++){var h=l[c];a+=u(h,t,r+a),a+=u(e[h],t,r+a)}return a}throw new Error("Unknown type "+s)}function a(e){var t=typeof e;if(t==="string"){var n=i(e);if(n<32)return 1+n;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(e instanceof ArrayBuffer){var n=e.byteLength;if(n<65536)return 3+n;if(n<4294967296)return 5+n}if(t==="number"){if(e<<0!==e)return 9;if(e>=0){if(e<128)return 1;if(e<256)return 2;if(e<65536)return 3;if(e<4294967296)return 5;if(e<0x10000000000000000)return 9;throw new Error("Number too big 0x"+e.toString(16))}if(e>=-32)return 1;if(e>=-128)return 2;if(e>=-32768)return 3;if(e>=-2147483648)return 5;if(e>=-0x8000000000000000)return 9;throw new Error("Number too small -0x"+e.toString(16).substr(1))}if(t==="boolean"||t==="undefined"||e===null)return 1;if(t==="object"){var n,r=0;if(Array.isArray(e)){n=e.length;for(var s=0;s<n;s++)r+=a(e[s])}else{var o=Object.keys(e);n=o.length;for(var s=0;s<n;s++){var u=o[s];r+=a(u)+a(e[u])}}if(n<16)return 1+r;if(n<65536)return 3+r;if(n<4294967296)return 5+r;throw new Error("Array or object too long 0x"+n.toString(16))}throw new Error("Unknown type "+t)}var e={};return e.inspect=t,e.utf8Write=n,e.utf8Read=r,e.utf8ByteCount=i,e.encode=function(e){var t=new ArrayBuffer(a(e)),n=new DataView(t);return u(e,n,0),t},e.decode=o,s.prototype.map=function(e){var t={};for(var n=0;n<e;n++){var r=this.parse();t[r]=this.parse()}return t},s.prototype.buf=function(e){var t=new ArrayBuffer(e);return(new Uint8Array(t)).set(new Uint8Array(this.view.buffer,this.offset,e),0),this.offset+=e,t},s.prototype.raw=function(e){var t=r(this.view,this.offset,e);return this.offset+=e,t},s.prototype.array=function(e){var t=new Array(e);for(var n=0;n<e;n++)t[n]=this.parse();return t},s.prototype.parse=function(){var e=this.view.getUint8(this.offset),t,n;if((e&224)===160)return n=e&31,this.offset++,this.raw(n);if((e&240)===128)return n=e&15,this.offset++,this.map(n);if((e&240)===144)return n=e&15,this.offset++,this.array(n);if((e&128)===0)return this.offset++,e;if((e&224)===224)return t=this.view.getInt8(this.offset),this.offset++,t;switch(e){case 218:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.raw(n);case 219:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.raw(n);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 196:return this.offset++,undefined;case 204:return t=this.view.getUint8(this.offset+1),this.offset+=2,t;case 205:return t=this.view.getUint16(this.offset+1),this.offset+=3,t;case 206:return t=this.view.getUint32(this.offset+1),this.offset+=5,t;case 208:return t=this.view.getInt8(this.offset+1),this.offset+=2,t;case 209:return t=this.view.getInt16(this.offset+1),this.offset+=3,t;case 210:return t=this.view.getInt32(this.offset+1),this.offset+=5,t;case 222:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.map(n);case 223:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.map(n);case 220:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.array(n);case 221:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.array(n);case 216:return n=this.view.getUint16(this.offset+1),this.offset+=3,this.buf(n);case 217:return n=this.view.getUint32(this.offset+1),this.offset+=5,this.buf(n);case 202:return t=this.view.getFloat32(this.offset+1),this.offset+=5,t;case 203:return t=this.view.getFloat64(this.offset+1),this.offset+=9,t}throw new Error("Unknown type 0x"+e.toString(16))},e}),importScripts("/vendors/scripts/requirejs.min.js");var queue=[];require(["vendors/msgpack"],function(e){self.postMessage=self.webkitPostMessage||self.postMessage,self.onmessage=function(t){switch(t.data.type){case"unpack":var n=e.decode(t.data.data);postMessage(n);break;case"pack":var r=e.encode(t.data.data);postMessage(r,[r]);break;case"unpackAndStringify":var n=e.decode(t.data.data);postMessage(JSON.stringify(n));break;default:throw new Error("Unknown MsgpackWorker operation type '"+t.data.type+"'")}};for(var t=0;t<queue.length;t++){var n=queue[t];self.onmessage(n)}delete queue}),self.onmessage=function(e){queue.push(e)},define("desktop/worker/msgpack.js",function(){});